<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=9" />
<title>Analysis Software: acts/blob/sPHENIX/Examples/Io/Csv/src/CsvTrackingGeometryWriter.cpp Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script> <link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script> 
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-155388685-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-155388685-2');
</script>
</head>
<body>
	<div id="top">
		<!-- do not remove this div, it is closed by doxygen! -->
		<div id="titlearea">
			<table cellspacing="0" cellpadding="0">
				<tbody>
					<tr style="height: 56px;">
						<td id="projectlogo"><a href="https://wiki.bnl.gov/sPHENIX/index.php/Main_Page"><img
								alt="Logo" src="../../sphenix.png" /></a></td>
						<td style="padding-left: 0.5em;">
							<div id="projectname">
								Analysis Software
							</div> 
							<div id="projectbrief">
								Documentation for <a href="https://wiki.bnl.gov/sPHENIX/index.php/Main_Page">sPHENIX</a> simulation software
							</div> 
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Home&#160;page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li><a href="../../examples.html"><span>Examples</span></a></li>
      <li><a href="../../usergroup0.html"><span>External&#160;Links</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('da/d59/CsvTrackingGeometryWriter_8cpp_source.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">CsvTrackingGeometryWriter.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../da/d59/CsvTrackingGeometryWriter_8cpp.html">Go to the documentation of this file.</a> Or view <a target="top" href="https://github.com/sPHENIX-Collaboration/acts/blob/sPHENIX/Examples/Io/Csv/src/CsvTrackingGeometryWriter.cpp">the newest version in sPHENIX GitHub for file CsvTrackingGeometryWriter.cpp</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// This file is part of the Acts project.</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Copyright (C) 2017 CERN for the benefit of the Acts project</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// This Source Code Form is subject to the terms of the Mozilla Public</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// License, v. 2.0. If a copy of the MPL was not distributed with this</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">// file, You can obtain one at http://mozilla.org/MPL/2.0/.</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/d8f/CsvTrackingGeometryWriter_8hpp.html">ActsExamples/Io/Csv/CsvTrackingGeometryWriter.hpp</a>&quot;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../da/dd2/Algebra_8hpp.html">Acts/Definitions/Algebra.hpp</a>&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/d6f/Units_8hpp.html">Acts/Definitions/Units.hpp</a>&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/de2/CartesianSegmentation_8hpp.html">Acts/Digitization/CartesianSegmentation.hpp</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/dda/DigitizationModule_8hpp.html">Acts/Digitization/DigitizationModule.hpp</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d96/Segmentation_8hpp.html">Acts/Digitization/Segmentation.hpp</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/d5b/AbstractVolume_8hpp.html">Acts/Geometry/AbstractVolume.hpp</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/d5f/BoundarySurfaceT_8hpp.html">Acts/Geometry/BoundarySurfaceT.hpp</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d1/db8/GeometryContext_8hpp.html">Acts/Geometry/GeometryContext.hpp</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d67/GeometryIdentifier_8hpp.html">Acts/Geometry/GeometryIdentifier.hpp</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d2/d3b/Layer_8hpp.html">Acts/Geometry/Layer.hpp</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/d24/TrackingGeometry_8hpp.html">Acts/Geometry/TrackingGeometry.hpp</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/d37/TrackingVolume_8hpp.html">Acts/Geometry/TrackingVolume.hpp</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/dd8/VolumeBounds_8hpp.html">Acts/Geometry/VolumeBounds.hpp</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/dc6/DefaultDetectorElementBase_8hpp.html">Acts/Geometry/detail/DefaultDetectorElementBase.hpp</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/db1/IdentifiedDetectorElement_8hpp.html">Acts/Plugins/Identification/IdentifiedDetectorElement.hpp</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d8/ddd/Surface_8hpp.html">Acts/Surfaces/Surface.hpp</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/de5/SurfaceArray_8hpp.html">Acts/Surfaces/SurfaceArray.hpp</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../da/ddb/SurfaceBounds_8hpp.html">Acts/Surfaces/SurfaceBounds.hpp</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d50/BinnedArray_8hpp.html">Acts/Utilities/BinnedArray.hpp</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d8/d7b/IAxis_8hpp.html">Acts/Utilities/IAxis.hpp</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d9/d11/Logger_8hpp.html">Acts/Utilities/Logger.hpp</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../de/d37/AlgorithmContext_8hpp.html">ActsExamples/Framework/AlgorithmContext.hpp</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dc/dad/Paths_8hpp.html">ActsExamples/Utilities/Paths.hpp</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &lt;array&gt;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &lt;cstddef&gt;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &lt;stdexcept&gt;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &lt;utility&gt;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &lt;dfe/dfe_io_dsv.hpp&gt;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d9/dce/CsvOutputData_8hpp.html" title="Plain structs that each define one row in a TrackML csv file.">CsvOutputData.hpp</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="keyword">using namespace </span>ActsExamples;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="code" href="../../de/d77/classActsExamples_1_1CsvTrackingGeometryWriter.html#a0ce13f2bcaa666a63480e71d2777acd2">   47</a></span>&#160;<a class="code" href="../../de/d77/classActsExamples_1_1CsvTrackingGeometryWriter.html#a0ce13f2bcaa666a63480e71d2777acd2">CsvTrackingGeometryWriter::CsvTrackingGeometryWriter</a>(</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d9/dea/structActsExamples_1_1CsvTrackingGeometryWriter_1_1Config.html">CsvTrackingGeometryWriter::Config</a>&amp; <a class="code" href="../../d1/da4/namespacefilter.html#ad00d0f852b219caefa8c3d9ab4c24b97">config</a>, <a class="code" href="../../dd/d23/namespaceActs_1_1Logging.html#a9b12dd924a4bd3aed921a33779ece95b" title="constants steering the debug output">Acts::Logging::Level</a> <a class="code" href="../../d5/d1e/namespacephysmon__simulation.html#a5954e6ca860cbfd936b849e4966c451d">level</a>)</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    : <a class="code" href="../../d2/dda/JsonMaterialWriter_8cpp.html#a2c9ce7b8a253cfae2ca572d8f16cc4e5">m_cfg</a>(config),</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;      <a class="code" href="../../df/da6/MeasurementsToSpacepoints_8cpp.html#ab2eb62608292d75134ccd7551b7d9431">m_logger</a>(Acts::<a class="code" href="../../da/d7b/namespaceActs.html#a9b4dee934b0b193d57604b19bc8cd527" title="get default debug output logger">getDefaultLogger</a>(<span class="stringliteral">&quot;CsvTrackingGeometryWriter&quot;</span>, level))</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;{</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <span class="keywordflow">if</span> (not <a class="code" href="../../de/d77/classActsExamples_1_1CsvTrackingGeometryWriter.html#afdf98201cd6950cca4676cfb7a9d6fb0">m_cfg</a>.<a class="code" href="../../d9/dea/structActsExamples_1_1CsvTrackingGeometryWriter_1_1Config.html#aaf3512f29e8c2d50506c2864621bdd63" title="The tracking geometry that should be written.">trackingGeometry</a>) {</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;Missing tracking geometry&quot;</span>);</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  }</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <a class="code" href="../../de/d77/classActsExamples_1_1CsvTrackingGeometryWriter.html#a503e40c57d4c9b676c5afce52ff84ad2">m_world</a> = <a class="code" href="../../de/d77/classActsExamples_1_1CsvTrackingGeometryWriter.html#afdf98201cd6950cca4676cfb7a9d6fb0">m_cfg</a>.<a class="code" href="../../d9/dea/structActsExamples_1_1CsvTrackingGeometryWriter_1_1Config.html#aaf3512f29e8c2d50506c2864621bdd63" title="The tracking geometry that should be written.">trackingGeometry</a>-&gt;highestTrackingVolume();</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../de/d77/classActsExamples_1_1CsvTrackingGeometryWriter.html#a503e40c57d4c9b676c5afce52ff84ad2">m_world</a> == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;Could not identify the world volume&quot;</span>);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  }</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;}</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="code" href="../../de/d77/classActsExamples_1_1CsvTrackingGeometryWriter.html#a37687217fd4b00a650bfa728b0430859">   62</a></span>&#160;<a class="code" href="../../d0/da7/namespacetesting_1_1internal.html#a8e8ff5b11e64078831112677156cb111">std::string</a> <a class="code" href="../../de/d77/classActsExamples_1_1CsvTrackingGeometryWriter.html#a37687217fd4b00a650bfa728b0430859" title="The algorithm name.">CsvTrackingGeometryWriter::name</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="keywordflow">return</span> <span class="stringliteral">&quot;CsvTrackingGeometryWriter&quot;</span>;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;}</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="keyword">using</span> SurfaceWriter = dfe::NamedTupleCsvWriter&lt;SurfaceData&gt;;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="keyword">using</span> SurfaceGridWriter = dfe::NamedTupleCsvWriter&lt;SurfaceGridData&gt;;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="keyword">using</span> LayerVolumeWriter = dfe::NamedTupleCsvWriter&lt;LayerVolumeData&gt;;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="keyword">using</span> <a class="code" href="../../da/d7b/namespaceActs.html#a58e67c1aa8da2b32fa6491868fff9b27" title="BoundarySurface of a volume.">BoundarySurface</a> = <a class="code" href="../../db/dc1/classActs_1_1BoundarySurfaceT.html">Acts::BoundarySurfaceT&lt;Acts::TrackingVolume&gt;</a>;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="keywordtype">void</span> fillSurfaceData(<a class="code" href="../../d9/da2/structActsExamples_1_1SurfaceData.html">SurfaceData</a>&amp; <a class="code" href="../../d5/d92/namespaceconfigureMap.html#afd933103ec4b81e10ab3f6629975eee0">data</a>, <span class="keyword">const</span> <a class="code" href="../../de/d7d/classActs_1_1Surface.html" title="Abstract Base Class for tracking surfaces.">Acts::Surface</a>&amp; <a class="code" href="../../d0/d63/namespacewriteMapConfig.html#af15bdc7bf9a3c2302b83fe06c484381d">surface</a>,</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;                     <span class="keyword">const</span> <a class="code" href="../../de/d60/classActs_1_1ContextType.html">Acts::GeometryContext</a>&amp; <a class="code" href="../../db/dc0/PropagationBentTracks_8cpp.html#a84b6b6ae2524cb394e2187879577d133">geoCtx</a>) noexcept(<span class="keyword">false</span>) {</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="comment">// encoded and partially decoded geometry identifier</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <a class="code" href="../../d5/d92/namespaceconfigureMap.html#afd933103ec4b81e10ab3f6629975eee0">data</a>.geometry_id = <a class="code" href="../../d0/d63/namespacewriteMapConfig.html#af15bdc7bf9a3c2302b83fe06c484381d">surface</a>.geometryId().value();</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <a class="code" href="../../d5/d92/namespaceconfigureMap.html#afd933103ec4b81e10ab3f6629975eee0">data</a>.volume_id = <a class="code" href="../../d0/d63/namespacewriteMapConfig.html#af15bdc7bf9a3c2302b83fe06c484381d">surface</a>.geometryId().volume();</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <a class="code" href="../../d5/d92/namespaceconfigureMap.html#afd933103ec4b81e10ab3f6629975eee0">data</a>.boundary_id = <a class="code" href="../../d0/d63/namespacewriteMapConfig.html#af15bdc7bf9a3c2302b83fe06c484381d">surface</a>.geometryId().boundary();</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <a class="code" href="../../d5/d92/namespaceconfigureMap.html#afd933103ec4b81e10ab3f6629975eee0">data</a>.layer_id = <a class="code" href="../../d0/d63/namespacewriteMapConfig.html#af15bdc7bf9a3c2302b83fe06c484381d">surface</a>.geometryId().layer();</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <a class="code" href="../../d5/d92/namespaceconfigureMap.html#afd933103ec4b81e10ab3f6629975eee0">data</a>.module_id = <a class="code" href="../../d0/d63/namespacewriteMapConfig.html#af15bdc7bf9a3c2302b83fe06c484381d">surface</a>.geometryId().sensitive();</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="comment">// center position</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <span class="keyword">auto</span> center = <a class="code" href="../../d0/d63/namespacewriteMapConfig.html#af15bdc7bf9a3c2302b83fe06c484381d">surface</a>.center(<a class="code" href="../../db/dc0/PropagationBentTracks_8cpp.html#a84b6b6ae2524cb394e2187879577d133">geoCtx</a>);</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <a class="code" href="../../d5/d92/namespaceconfigureMap.html#afd933103ec4b81e10ab3f6629975eee0">data</a>.cx = center.x() / <a class="code" href="../../d6/d4d/namespaceActs_1_1UnitConstants.html#a44fb500abc41c8b4d2937824ad76f8bd">Acts::UnitConstants::mm</a>;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <a class="code" href="../../d5/d92/namespaceconfigureMap.html#afd933103ec4b81e10ab3f6629975eee0">data</a>.cy = center.y() / <a class="code" href="../../d6/d4d/namespaceActs_1_1UnitConstants.html#a44fb500abc41c8b4d2937824ad76f8bd">Acts::UnitConstants::mm</a>;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <a class="code" href="../../d5/d92/namespaceconfigureMap.html#afd933103ec4b81e10ab3f6629975eee0">data</a>.cz = center.z() / <a class="code" href="../../d6/d4d/namespaceActs_1_1UnitConstants.html#a44fb500abc41c8b4d2937824ad76f8bd">Acts::UnitConstants::mm</a>;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="comment">// rotation matrix components are unit-less</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="keyword">auto</span> <a class="code" href="../../dd/d7e/namespaceActs_1_1Test.html#a44ab9644d080b02c91a8935c650bd2fb">transform</a> = <a class="code" href="../../d0/d63/namespacewriteMapConfig.html#af15bdc7bf9a3c2302b83fe06c484381d">surface</a>.transform(<a class="code" href="../../db/dc0/PropagationBentTracks_8cpp.html#a84b6b6ae2524cb394e2187879577d133">geoCtx</a>);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <a class="code" href="../../d5/d92/namespaceconfigureMap.html#afd933103ec4b81e10ab3f6629975eee0">data</a>.rot_xu = <a class="code" href="../../dd/d7e/namespaceActs_1_1Test.html#a44ab9644d080b02c91a8935c650bd2fb">transform</a>(0, 0);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <a class="code" href="../../d5/d92/namespaceconfigureMap.html#afd933103ec4b81e10ab3f6629975eee0">data</a>.rot_xv = <a class="code" href="../../dd/d7e/namespaceActs_1_1Test.html#a44ab9644d080b02c91a8935c650bd2fb">transform</a>(0, 1);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <a class="code" href="../../d5/d92/namespaceconfigureMap.html#afd933103ec4b81e10ab3f6629975eee0">data</a>.rot_xw = <a class="code" href="../../dd/d7e/namespaceActs_1_1Test.html#a44ab9644d080b02c91a8935c650bd2fb">transform</a>(0, 2);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <a class="code" href="../../d5/d92/namespaceconfigureMap.html#afd933103ec4b81e10ab3f6629975eee0">data</a>.rot_yu = <a class="code" href="../../dd/d7e/namespaceActs_1_1Test.html#a44ab9644d080b02c91a8935c650bd2fb">transform</a>(1, 0);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <a class="code" href="../../d5/d92/namespaceconfigureMap.html#afd933103ec4b81e10ab3f6629975eee0">data</a>.rot_yv = <a class="code" href="../../dd/d7e/namespaceActs_1_1Test.html#a44ab9644d080b02c91a8935c650bd2fb">transform</a>(1, 1);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <a class="code" href="../../d5/d92/namespaceconfigureMap.html#afd933103ec4b81e10ab3f6629975eee0">data</a>.rot_yw = <a class="code" href="../../dd/d7e/namespaceActs_1_1Test.html#a44ab9644d080b02c91a8935c650bd2fb">transform</a>(1, 2);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <a class="code" href="../../d5/d92/namespaceconfigureMap.html#afd933103ec4b81e10ab3f6629975eee0">data</a>.rot_zu = <a class="code" href="../../dd/d7e/namespaceActs_1_1Test.html#a44ab9644d080b02c91a8935c650bd2fb">transform</a>(2, 0);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <a class="code" href="../../d5/d92/namespaceconfigureMap.html#afd933103ec4b81e10ab3f6629975eee0">data</a>.rot_zv = <a class="code" href="../../dd/d7e/namespaceActs_1_1Test.html#a44ab9644d080b02c91a8935c650bd2fb">transform</a>(2, 1);</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <a class="code" href="../../d5/d92/namespaceconfigureMap.html#afd933103ec4b81e10ab3f6629975eee0">data</a>.rot_zw = <a class="code" href="../../dd/d7e/namespaceActs_1_1Test.html#a44ab9644d080b02c91a8935c650bd2fb">transform</a>(2, 2);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  std::array&lt;float*, 7&gt; dataBoundParameters = {</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      &amp;<a class="code" href="../../d5/d92/namespaceconfigureMap.html#afd933103ec4b81e10ab3f6629975eee0">data</a>.bound_param0, &amp;<a class="code" href="../../d5/d92/namespaceconfigureMap.html#afd933103ec4b81e10ab3f6629975eee0">data</a>.bound_param1, &amp;<a class="code" href="../../d5/d92/namespaceconfigureMap.html#afd933103ec4b81e10ab3f6629975eee0">data</a>.bound_param2,</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;      &amp;<a class="code" href="../../d5/d92/namespaceconfigureMap.html#afd933103ec4b81e10ab3f6629975eee0">data</a>.bound_param3, &amp;<a class="code" href="../../d5/d92/namespaceconfigureMap.html#afd933103ec4b81e10ab3f6629975eee0">data</a>.bound_param4, &amp;<a class="code" href="../../d5/d92/namespaceconfigureMap.html#afd933103ec4b81e10ab3f6629975eee0">data</a>.bound_param5,</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;      &amp;<a class="code" href="../../d5/d92/namespaceconfigureMap.html#afd933103ec4b81e10ab3f6629975eee0">data</a>.bound_param6};</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code" href="../../d4/dc5/CalcDecile__RhoFluct_8cc.html#a18dca851ad6e141abd42f971e8979210">bounds</a> = <a class="code" href="../../d0/d63/namespacewriteMapConfig.html#af15bdc7bf9a3c2302b83fe06c484381d">surface</a>.bounds();</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <a class="code" href="../../d5/d92/namespaceconfigureMap.html#afd933103ec4b81e10ab3f6629975eee0">data</a>.bounds_type = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="../../d4/dc5/CalcDecile__RhoFluct_8cc.html#a18dca851ad6e141abd42f971e8979210">bounds</a>.type());</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="keyword">auto</span> boundValues = <a class="code" href="../../d4/dc5/CalcDecile__RhoFluct_8cc.html#a18dca851ad6e141abd42f971e8979210">bounds</a>.values();</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="keywordflow">if</span> (boundValues.size() &gt; dataBoundParameters.size()) {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordflow">throw</span> std::invalid_argument(</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <span class="stringliteral">&quot;Bound types with too many parameters. Should never happen.&quot;</span>);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  }</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> ipar = 0; ipar &lt; boundValues.size(); ++ipar) {</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    (*dataBoundParameters[ipar]) = boundValues[ipar];</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  }</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d0/d63/namespacewriteMapConfig.html#af15bdc7bf9a3c2302b83fe06c484381d">surface</a>.associatedDetectorElement() != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <a class="code" href="../../d5/d92/namespaceconfigureMap.html#afd933103ec4b81e10ab3f6629975eee0">data</a>.module_t = <a class="code" href="../../d0/d63/namespacewriteMapConfig.html#af15bdc7bf9a3c2302b83fe06c484381d">surface</a>.associatedDetectorElement()-&gt;thickness() /</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                    <a class="code" href="../../d6/d4d/namespaceActs_1_1UnitConstants.html#a44fb500abc41c8b4d2937824ad76f8bd">Acts::UnitConstants::mm</a>;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span>* detElement =</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../d7/d41/classActs_1_1IdentifiedDetectorElement.html" title="The identified detector element.">Acts::IdentifiedDetectorElement</a>*<span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;            <a class="code" href="../../d0/d63/namespacewriteMapConfig.html#af15bdc7bf9a3c2302b83fe06c484381d">surface</a>.associatedDetectorElement());</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordflow">if</span> (detElement != <span class="keyword">nullptr</span> and detElement-&gt;digitizationModule()) {</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      <span class="keyword">auto</span> dModule = detElement-&gt;<a class="code" href="../../d7/d41/classActs_1_1IdentifiedDetectorElement.html#a5bb79cbe56f9ad59df972ccd2f5c1735" title="Retrieve the DigitizationModule.">digitizationModule</a>();</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;      <span class="comment">// dynamic_cast to CartesianSegmentation</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span>* <a class="code" href="../../dd/d7e/namespaceActs_1_1Test.html#a0c69c61adfab2d313d71bf4be4ec17e2">cSegmentation</a> =</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;          <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../d4/d2d/classActs_1_1CartesianSegmentation.html" title="Segmentation Base class.">Acts::CartesianSegmentation</a>*<span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;              &amp;(dModule-&gt;segmentation()));</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d7e/namespaceActs_1_1Test.html#a0c69c61adfab2d313d71bf4be4ec17e2">cSegmentation</a> != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <span class="keyword">auto</span> pitch = <a class="code" href="../../dd/d7e/namespaceActs_1_1Test.html#a0c69c61adfab2d313d71bf4be4ec17e2">cSegmentation</a>-&gt;<a class="code" href="../../d4/d2d/classActs_1_1CartesianSegmentation.html#a13a6a58c46984f00404380a1655e2eee" title="return the pitch sizes as a pair">pitch</a>();</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <a class="code" href="../../d5/d92/namespaceconfigureMap.html#afd933103ec4b81e10ab3f6629975eee0">data</a>.pitch_u = pitch.first / <a class="code" href="../../d6/d4d/namespaceActs_1_1UnitConstants.html#a44fb500abc41c8b4d2937824ad76f8bd">Acts::UnitConstants::mm</a>;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <a class="code" href="../../d5/d92/namespaceconfigureMap.html#afd933103ec4b81e10ab3f6629975eee0">data</a>.pitch_v = pitch.second / <a class="code" href="../../d6/d4d/namespaceActs_1_1UnitConstants.html#a44fb500abc41c8b4d2937824ad76f8bd">Acts::UnitConstants::mm</a>;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      }</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    }</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  }</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;}</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="keywordtype">void</span> writeSurface(SurfaceWriter&amp; sfWriter, <span class="keyword">const</span> <a class="code" href="../../de/d7d/classActs_1_1Surface.html" title="Abstract Base Class for tracking surfaces.">Acts::Surface</a>&amp; <a class="code" href="../../d0/d63/namespacewriteMapConfig.html#af15bdc7bf9a3c2302b83fe06c484381d">surface</a>,</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                  <span class="keyword">const</span> <a class="code" href="../../de/d60/classActs_1_1ContextType.html">Acts::GeometryContext</a>&amp; <a class="code" href="../../db/dc0/PropagationBentTracks_8cpp.html#a84b6b6ae2524cb394e2187879577d133">geoCtx</a>) {</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <a class="code" href="../../d9/da2/structActsExamples_1_1SurfaceData.html">SurfaceData</a> <a class="code" href="../../d5/d92/namespaceconfigureMap.html#afd933103ec4b81e10ab3f6629975eee0">data</a>;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  fillSurfaceData(data, surface, geoCtx);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  sfWriter.append(data);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;}</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="keywordtype">void</span> writeCylinderLayerVolume(</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    LayerVolumeWriter&amp; lvWriter, <span class="keyword">const</span> <a class="code" href="../../da/d28/classActs_1_1Layer.html">Acts::Layer</a>&amp; lv,</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../de/d0a/group__coordinates-types.html#ga54c3761cb33d57b119f2e484a6b07f8c">Acts::Transform3</a>&amp; <a class="code" href="../../dd/d7e/namespaceActs_1_1Test.html#a44ab9644d080b02c91a8935c650bd2fb">transform</a>,</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    std::vector&lt;Acts::ActsScalar&gt;&amp; representingBoundValues,</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    std::vector&lt;Acts::ActsScalar&gt;&amp; volumeBoundValues,</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    std::vector&lt;Acts::ActsScalar&gt;&amp; lastBoundValues, <span class="keywordtype">bool</span> last) {</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <span class="comment">// The layer volume to be written</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <a class="code" href="../../d6/d76/structActsExamples_1_1LayerVolumeData.html">LayerVolumeData</a> lvDims;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  lvDims.<a class="code" href="../../d6/d76/structActsExamples_1_1LayerVolumeData.html#ab64de948bd887ec092f5431909fb8379" title="Surface identifier. Not available in the TrackML datasets.">geometry_id</a> = lv.<a class="code" href="../../d3/d07/classActs_1_1GeometryObject.html#abc805e37f184d25c4d25b5f99330125c">geometryId</a>().<a class="code" href="../../d7/d33/classActs_1_1GeometryIdentifier.html#ad4005494a421454dd0a37a864910e7c1" title="Return the encoded value.">value</a>();</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  lvDims.<a class="code" href="../../d6/d76/structActsExamples_1_1LayerVolumeData.html#a35e7c43ca14d7c6e1fe47226ef3d92ea" title="Partially decoded surface identifier components.">volume_id</a> = lv.<a class="code" href="../../d3/d07/classActs_1_1GeometryObject.html#abc805e37f184d25c4d25b5f99330125c">geometryId</a>().<a class="code" href="../../d7/d33/classActs_1_1GeometryIdentifier.html#abc1ccf966fe5fc7f517c6775b5d38623" title="Return the volume identifier.">volume</a>();</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  lvDims.<a class="code" href="../../d6/d76/structActsExamples_1_1LayerVolumeData.html#af13d6e39de8afc95f0cda72e02759580">layer_id</a> = lv.<a class="code" href="../../d3/d07/classActs_1_1GeometryObject.html#abc805e37f184d25c4d25b5f99330125c">geometryId</a>().<a class="code" href="../../d7/d33/classActs_1_1GeometryIdentifier.html#a67b1bfbab773f4ca99a12164b2bdbf61" title="Return the layer identifier.">layer</a>();</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <span class="keywordtype">bool</span> isCylinderLayer = (lv.<a class="code" href="../../da/d28/classActs_1_1Layer.html#a43b7c36c2aac940f5bd8fd89d4a2fa89">surfaceRepresentation</a>().<a class="code" href="../../de/d7d/classActs_1_1Surface.html#a6926cf349535014a09529e416ef4a004">bounds</a>().<a class="code" href="../../df/dd3/classActs_1_1SurfaceBounds.html#a59935775fe677c49c9ba4cbd72c11011">type</a>() ==</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                          <a class="code" href="../../df/dd3/classActs_1_1SurfaceBounds.html#af8fc191468cd9d1ce2a8750bdddf88d9aa70b57b724640f1eefc52acc6810d92a">Acts::SurfaceBounds::eCylinder</a>);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="keyword">auto</span> lTranslation = transform.translation();</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <span class="comment">// Change volume Bound values to r min, r max, z min, z max, phi min,</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <span class="comment">// phi max</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  representingBoundValues = {</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      representingBoundValues[0],</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      representingBoundValues[1],</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      lTranslation.z() - representingBoundValues[2],</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      lTranslation.z() + representingBoundValues[2],</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      representingBoundValues[4] - representingBoundValues[3],</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      representingBoundValues[4] + representingBoundValues[3]};</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <span class="comment">// Synchronize</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  lvDims.<a class="code" href="../../d6/d76/structActsExamples_1_1LayerVolumeData.html#a175bd6abfa2d5a1c510b5969abbaf1e4">min_v0</a> =</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      isCylinderLayer ? representingBoundValues[0] : volumeBoundValues[0];</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  lvDims.<a class="code" href="../../d6/d76/structActsExamples_1_1LayerVolumeData.html#abd3fb05483d7aace4970d429f0889968">max_v0</a> =</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      isCylinderLayer ? representingBoundValues[1] : volumeBoundValues[1];</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  lvDims.<a class="code" href="../../d6/d76/structActsExamples_1_1LayerVolumeData.html#a006229440cb71ae6c968bd328d7def7c">min_v1</a> =</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      isCylinderLayer ? volumeBoundValues[2] : representingBoundValues[2];</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  lvDims.<a class="code" href="../../d6/d76/structActsExamples_1_1LayerVolumeData.html#a599200d55335af0865775b8b3afd4def">max_v1</a> =</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      isCylinderLayer ? volumeBoundValues[3] : representingBoundValues[3];</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  lvDims.<a class="code" href="../../d6/d76/structActsExamples_1_1LayerVolumeData.html#a94d2ba1626fafdd95378ac30a0a3c2f4">min_v2</a> = representingBoundValues[4];</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  lvDims.<a class="code" href="../../d6/d76/structActsExamples_1_1LayerVolumeData.html#ab46aa9d3e0ba777aec38714c63cc8bfa">max_v2</a> = representingBoundValues[5];</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <span class="comment">// Write the prior navigation layer</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <a class="code" href="../../d6/d76/structActsExamples_1_1LayerVolumeData.html">LayerVolumeData</a> nlvDims;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  nlvDims.<a class="code" href="../../d6/d76/structActsExamples_1_1LayerVolumeData.html#ab64de948bd887ec092f5431909fb8379" title="Surface identifier. Not available in the TrackML datasets.">geometry_id</a> = lv.<a class="code" href="../../d3/d07/classActs_1_1GeometryObject.html#abc805e37f184d25c4d25b5f99330125c">geometryId</a>().<a class="code" href="../../d7/d33/classActs_1_1GeometryIdentifier.html#ad4005494a421454dd0a37a864910e7c1" title="Return the encoded value.">value</a>();</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  nlvDims.<a class="code" href="../../d6/d76/structActsExamples_1_1LayerVolumeData.html#a35e7c43ca14d7c6e1fe47226ef3d92ea" title="Partially decoded surface identifier components.">volume_id</a> = lv.<a class="code" href="../../d3/d07/classActs_1_1GeometryObject.html#abc805e37f184d25c4d25b5f99330125c">geometryId</a>().<a class="code" href="../../d7/d33/classActs_1_1GeometryIdentifier.html#abc1ccf966fe5fc7f517c6775b5d38623" title="Return the volume identifier.">volume</a>();</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  nlvDims.<a class="code" href="../../d6/d76/structActsExamples_1_1LayerVolumeData.html#af13d6e39de8afc95f0cda72e02759580">layer_id</a> = lv.<a class="code" href="../../d3/d07/classActs_1_1GeometryObject.html#abc805e37f184d25c4d25b5f99330125c">geometryId</a>().<a class="code" href="../../d7/d33/classActs_1_1GeometryIdentifier.html#a67b1bfbab773f4ca99a12164b2bdbf61" title="Return the layer identifier.">layer</a>() - 1;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <span class="keywordflow">if</span> (isCylinderLayer) {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    nlvDims.<a class="code" href="../../d6/d76/structActsExamples_1_1LayerVolumeData.html#a175bd6abfa2d5a1c510b5969abbaf1e4">min_v0</a> = lastBoundValues[0];</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    nlvDims.<a class="code" href="../../d6/d76/structActsExamples_1_1LayerVolumeData.html#abd3fb05483d7aace4970d429f0889968">max_v0</a> = representingBoundValues[0];</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    nlvDims.<a class="code" href="../../d6/d76/structActsExamples_1_1LayerVolumeData.html#a006229440cb71ae6c968bd328d7def7c">min_v1</a> = lastBoundValues[2];</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    nlvDims.<a class="code" href="../../d6/d76/structActsExamples_1_1LayerVolumeData.html#a599200d55335af0865775b8b3afd4def">max_v1</a> = lastBoundValues[3];</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="comment">// Reset the r min boundary</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    lastBoundValues[0] = representingBoundValues[1];</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    nlvDims.<a class="code" href="../../d6/d76/structActsExamples_1_1LayerVolumeData.html#a175bd6abfa2d5a1c510b5969abbaf1e4">min_v0</a> = lastBoundValues[0];</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    nlvDims.<a class="code" href="../../d6/d76/structActsExamples_1_1LayerVolumeData.html#abd3fb05483d7aace4970d429f0889968">max_v0</a> = lastBoundValues[1];</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    nlvDims.<a class="code" href="../../d6/d76/structActsExamples_1_1LayerVolumeData.html#a006229440cb71ae6c968bd328d7def7c">min_v1</a> = lastBoundValues[2];</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    nlvDims.<a class="code" href="../../d6/d76/structActsExamples_1_1LayerVolumeData.html#a599200d55335af0865775b8b3afd4def">max_v1</a> = representingBoundValues[2];</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="comment">// Reset the r min boundary</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    lastBoundValues[2] = representingBoundValues[3];</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  }</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  nlvDims.<a class="code" href="../../d6/d76/structActsExamples_1_1LayerVolumeData.html#a94d2ba1626fafdd95378ac30a0a3c2f4">min_v2</a> = representingBoundValues[4];</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  nlvDims.<a class="code" href="../../d6/d76/structActsExamples_1_1LayerVolumeData.html#ab46aa9d3e0ba777aec38714c63cc8bfa">max_v2</a> = representingBoundValues[5];</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  lvWriter.append(nlvDims);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <span class="comment">// Write the volume dimensions for the sensitive layer</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  lvWriter.append(lvDims);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <span class="comment">// Write last if needed</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <span class="keywordflow">if</span> (last) {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="comment">// Write the last navigation layer volume</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <a class="code" href="../../d6/d76/structActsExamples_1_1LayerVolumeData.html">LayerVolumeData</a> llvDims;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    llvDims.<a class="code" href="../../d6/d76/structActsExamples_1_1LayerVolumeData.html#ab64de948bd887ec092f5431909fb8379" title="Surface identifier. Not available in the TrackML datasets.">geometry_id</a> = lv.<a class="code" href="../../d3/d07/classActs_1_1GeometryObject.html#abc805e37f184d25c4d25b5f99330125c">geometryId</a>().<a class="code" href="../../d7/d33/classActs_1_1GeometryIdentifier.html#ad4005494a421454dd0a37a864910e7c1" title="Return the encoded value.">value</a>();</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    llvDims.<a class="code" href="../../d6/d76/structActsExamples_1_1LayerVolumeData.html#a35e7c43ca14d7c6e1fe47226ef3d92ea" title="Partially decoded surface identifier components.">volume_id</a> = lv.<a class="code" href="../../d3/d07/classActs_1_1GeometryObject.html#abc805e37f184d25c4d25b5f99330125c">geometryId</a>().<a class="code" href="../../d7/d33/classActs_1_1GeometryIdentifier.html#abc1ccf966fe5fc7f517c6775b5d38623" title="Return the volume identifier.">volume</a>();</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    llvDims.<a class="code" href="../../d6/d76/structActsExamples_1_1LayerVolumeData.html#af13d6e39de8afc95f0cda72e02759580">layer_id</a> = lv.<a class="code" href="../../d3/d07/classActs_1_1GeometryObject.html#abc805e37f184d25c4d25b5f99330125c">geometryId</a>().<a class="code" href="../../d7/d33/classActs_1_1GeometryIdentifier.html#a67b1bfbab773f4ca99a12164b2bdbf61" title="Return the layer identifier.">layer</a>() + 1;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    llvDims.<a class="code" href="../../d6/d76/structActsExamples_1_1LayerVolumeData.html#a175bd6abfa2d5a1c510b5969abbaf1e4">min_v0</a> = lastBoundValues[0];</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    llvDims.<a class="code" href="../../d6/d76/structActsExamples_1_1LayerVolumeData.html#abd3fb05483d7aace4970d429f0889968">max_v0</a> = lastBoundValues[1];</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    llvDims.<a class="code" href="../../d6/d76/structActsExamples_1_1LayerVolumeData.html#a006229440cb71ae6c968bd328d7def7c">min_v1</a> = lastBoundValues[2];</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    llvDims.<a class="code" href="../../d6/d76/structActsExamples_1_1LayerVolumeData.html#a599200d55335af0865775b8b3afd4def">max_v1</a> = lastBoundValues[3];</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    llvDims.<a class="code" href="../../d6/d76/structActsExamples_1_1LayerVolumeData.html#a94d2ba1626fafdd95378ac30a0a3c2f4">min_v2</a> = representingBoundValues[4];</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    llvDims.<a class="code" href="../../d6/d76/structActsExamples_1_1LayerVolumeData.html#ab46aa9d3e0ba777aec38714c63cc8bfa">max_v2</a> = representingBoundValues[5];</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="comment">// Close up volume</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    lvWriter.append(llvDims);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  }</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;}</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="keywordtype">void</span> writeBoundarySurface(SurfaceWriter&amp; <a class="code" href="../../dc/d38/AnalyzeResiduals_8C.html#a38ceb1bfc505706287365fbb2ac4406a">writer</a>,</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                          <span class="keyword">const</span> <a class="code" href="../../da/d7b/namespaceActs.html#a58e67c1aa8da2b32fa6491868fff9b27" title="BoundarySurface of a volume.">BoundarySurface</a>&amp; bsurface,</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                          <span class="keyword">const</span> <a class="code" href="../../de/d60/classActs_1_1ContextType.html">Acts::GeometryContext</a>&amp; geoCtx) {</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <a class="code" href="../../d9/da2/structActsExamples_1_1SurfaceData.html">SurfaceData</a> <a class="code" href="../../d5/d92/namespaceconfigureMap.html#afd933103ec4b81e10ab3f6629975eee0">data</a>;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  fillSurfaceData(data, bsurface.surfaceRepresentation(), <a class="code" href="../../db/dc0/PropagationBentTracks_8cpp.html#a84b6b6ae2524cb394e2187879577d133">geoCtx</a>);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  writer.append(data);</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;}</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="keywordtype">void</span> writeVolume(SurfaceWriter&amp; sfWriter, SurfaceGridWriter&amp; sfGridWriter,</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                 LayerVolumeWriter&amp; lvWriter,</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                 <span class="keyword">const</span> <a class="code" href="../../dd/dcd/classActs_1_1TrackingVolume.html">Acts::TrackingVolume</a>&amp; volume, <span class="keywordtype">bool</span> writeSensitive,</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                 <span class="keywordtype">bool</span> writeBoundary, <span class="keywordtype">bool</span> writeSurfaceGrid,</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                 <span class="keywordtype">bool</span> writeLayerVolume, <span class="keyword">const</span> <a class="code" href="../../de/d60/classActs_1_1ContextType.html">Acts::GeometryContext</a>&amp; geoCtx) {</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="comment">// process all layers that are directly stored within this volume</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="keywordflow">if</span> (volume.<a class="code" href="../../dd/dcd/classActs_1_1TrackingVolume.html#a478a7195a48eefad61ed2a6b60b877cc">confinedLayers</a>() != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; vTransform = volume.<a class="code" href="../../d2/d65/classActs_1_1Volume.html#a088d0aa2ce95c05f841d79a80112ff5a" title="Return methods for geometry transform.">transform</a>();</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="comment">// Get the values of the volume boundaries</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    std::vector&lt;Acts::ActsScalar&gt; volumeBoundValues =</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        volume.<a class="code" href="../../d2/d65/classActs_1_1Volume.html#a55bdd4b9145aacecf981084d849d49f3" title="returns the volumeBounds()">volumeBounds</a>().<a class="code" href="../../db/ddd/classActs_1_1VolumeBounds.html#a17faafde06408bdbe604d1955d60a697">values</a>();</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    std::vector&lt;Acts::ActsScalar&gt; lastBoundValues;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">if</span> (volume.<a class="code" href="../../d2/d65/classActs_1_1Volume.html#a55bdd4b9145aacecf981084d849d49f3" title="returns the volumeBounds()">volumeBounds</a>().<a class="code" href="../../db/ddd/classActs_1_1VolumeBounds.html#a531dc0ca9ae8ebbaef719231b65f5249">type</a>() == <a class="code" href="../../db/ddd/classActs_1_1VolumeBounds.html#a1b3926c38d21a79b7104d6049fe71248a87dc1f2b32dc6b2c38db208fe8ecc53d">Acts::VolumeBounds::eCylinder</a>) {</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      <span class="keyword">auto</span> vTranslation = vTransform.translation();</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      <span class="comment">// values to r min, r max, z min, z max, phi min, phi max</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      volumeBoundValues = {</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;          volumeBoundValues[0],</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;          volumeBoundValues[1],</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;          vTranslation.z() - volumeBoundValues[2],</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;          vTranslation.z() + volumeBoundValues[2],</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;          volumeBoundValues[4] - volumeBoundValues[3],</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;          volumeBoundValues[4] + volumeBoundValues[3],</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      };</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      lastBoundValues = volumeBoundValues;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    }</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> layerIdx = 0;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; layers = volume.<a class="code" href="../../dd/dcd/classActs_1_1TrackingVolume.html#a478a7195a48eefad61ed2a6b60b877cc">confinedLayers</a>()-&gt;<a class="code" href="../../d5/d80/classActs_1_1BinnedArray.html#a05ad33fedadf1c400cac3c93a54672d7">arrayObjects</a>();</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="comment">// If we only have three layers, then the volume is the layer volume</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="comment">// so let&#39;s write it - this case will be excluded afterwards</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keywordflow">if</span> (layers.size() == 3 and writeLayerVolume) {</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      <span class="keyword">auto</span> slayer = layers[1];</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      <a class="code" href="../../d6/d76/structActsExamples_1_1LayerVolumeData.html">LayerVolumeData</a> plvDims;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      plvDims.<a class="code" href="../../d6/d76/structActsExamples_1_1LayerVolumeData.html#ab64de948bd887ec092f5431909fb8379" title="Surface identifier. Not available in the TrackML datasets.">geometry_id</a> = slayer-&gt;geometryId().value();</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      plvDims.<a class="code" href="../../d6/d76/structActsExamples_1_1LayerVolumeData.html#a35e7c43ca14d7c6e1fe47226ef3d92ea" title="Partially decoded surface identifier components.">volume_id</a> = slayer-&gt;geometryId().volume();</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      plvDims.<a class="code" href="../../d6/d76/structActsExamples_1_1LayerVolumeData.html#af13d6e39de8afc95f0cda72e02759580">layer_id</a> = slayer-&gt;geometryId().layer();</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      plvDims.<a class="code" href="../../d6/d76/structActsExamples_1_1LayerVolumeData.html#a175bd6abfa2d5a1c510b5969abbaf1e4">min_v0</a> = volumeBoundValues[0];</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      plvDims.<a class="code" href="../../d6/d76/structActsExamples_1_1LayerVolumeData.html#abd3fb05483d7aace4970d429f0889968">max_v0</a> = volumeBoundValues[1];</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      plvDims.<a class="code" href="../../d6/d76/structActsExamples_1_1LayerVolumeData.html#a006229440cb71ae6c968bd328d7def7c">min_v1</a> = volumeBoundValues[2];</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      plvDims.<a class="code" href="../../d6/d76/structActsExamples_1_1LayerVolumeData.html#a599200d55335af0865775b8b3afd4def">max_v1</a> = volumeBoundValues[3];</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      lvWriter.append(plvDims);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    }</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="comment">// Now loop over the layer and write them</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code" href="../../d1/d15/ntuple__variables_8C.html#aeaba15d6b74b6b50a39c4b96e5b26f84">layer</a> : layers) {</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      <span class="comment">// We skip over navigation layers for layer volume writing</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      <span class="comment">// they will be written with the sensitive/passive parts for</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      <span class="comment">// synchronization</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d1/d15/ntuple__variables_8C.html#aeaba15d6b74b6b50a39c4b96e5b26f84">layer</a>-&gt;layerType() == <a class="code" href="../../da/d7b/namespaceActs.html#ab59015c67d930641de6f1bb7e31e2873a7eee8a5290452963e3934c132a800094">Acts::navigation</a>) {</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        ++layerIdx;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        <span class="comment">// For a correct layer volume setup, we need the navigation layers</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <span class="keywordflow">if</span> (writeLayerVolume) {</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;          writeSurface(sfWriter, <a class="code" href="../../d1/d15/ntuple__variables_8C.html#aeaba15d6b74b6b50a39c4b96e5b26f84">layer</a>-&gt;surfaceRepresentation(), <a class="code" href="../../db/dc0/PropagationBentTracks_8cpp.html#a84b6b6ae2524cb394e2187879577d133">geoCtx</a>);</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        }</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <span class="comment">// Get the representing volume</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span>* rVolume = <a class="code" href="../../d1/d15/ntuple__variables_8C.html#aeaba15d6b74b6b50a39c4b96e5b26f84">layer</a>-&gt;representingVolume();</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        <span class="comment">// Write the layer volume, exclude single layer volumes (written above)</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <span class="keywordflow">if</span> (rVolume != <span class="keyword">nullptr</span> and writeLayerVolume and layers.size() &gt; 3) {</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;          <span class="comment">// Get the values of the representing volume</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;          std::vector&lt;Acts::ActsScalar&gt; representingBoundValues =</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;              rVolume-&gt;volumeBounds().values();</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;          <span class="keywordflow">if</span> (rVolume-&gt;volumeBounds().type() == <a class="code" href="../../db/ddd/classActs_1_1VolumeBounds.html#a1b3926c38d21a79b7104d6049fe71248a87dc1f2b32dc6b2c38db208fe8ecc53d">Acts::VolumeBounds::eCylinder</a>) {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            <span class="keywordtype">bool</span> last = (layerIdx + 2 ==</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                         volume.<a class="code" href="../../dd/dcd/classActs_1_1TrackingVolume.html#a478a7195a48eefad61ed2a6b60b877cc">confinedLayers</a>()-&gt;<a class="code" href="../../d5/d80/classActs_1_1BinnedArray.html#a05ad33fedadf1c400cac3c93a54672d7">arrayObjects</a>().size());</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            writeCylinderLayerVolume(lvWriter, *<a class="code" href="../../d1/d15/ntuple__variables_8C.html#aeaba15d6b74b6b50a39c4b96e5b26f84">layer</a>, rVolume-&gt;transform(),</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                                     representingBoundValues, volumeBoundValues,</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                                     lastBoundValues, last);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;          }</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        }</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <span class="comment">// Surface has sub surfaces</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d1/d15/ntuple__variables_8C.html#aeaba15d6b74b6b50a39c4b96e5b26f84">layer</a>-&gt;surfaceArray() != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;          <span class="keyword">auto</span> sfArray = <a class="code" href="../../d1/d15/ntuple__variables_8C.html#aeaba15d6b74b6b50a39c4b96e5b26f84">layer</a>-&gt;surfaceArray();</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;          <span class="comment">// Write the surface grid itself if configured</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;          <span class="keywordflow">if</span> (writeSurfaceGrid) {</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            <a class="code" href="../../d7/dff/structActsExamples_1_1SurfaceGridData.html">SurfaceGridData</a> sfGrid;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            sfGrid.<a class="code" href="../../d7/dff/structActsExamples_1_1SurfaceGridData.html#aec81f04dc02e26a2d47de65a99dde85f" title="Surface identifier. Not available in the TrackML datasets.">geometry_id</a> = <a class="code" href="../../d1/d15/ntuple__variables_8C.html#aeaba15d6b74b6b50a39c4b96e5b26f84">layer</a>-&gt;geometryId().value();</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;            sfGrid.<a class="code" href="../../d7/dff/structActsExamples_1_1SurfaceGridData.html#af922cccb7370467bfd10a2d41b8ade20" title="Partially decoded surface identifier components.">volume_id</a> = <a class="code" href="../../d1/d15/ntuple__variables_8C.html#aeaba15d6b74b6b50a39c4b96e5b26f84">layer</a>-&gt;geometryId().volume();</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;            sfGrid.<a class="code" href="../../d7/dff/structActsExamples_1_1SurfaceGridData.html#af6ff6e8b654f99adcef65edf77209ef8">layer_id</a> = <a class="code" href="../../d1/d15/ntuple__variables_8C.html#aeaba15d6b74b6b50a39c4b96e5b26f84">layer</a>-&gt;geometryId().layer();</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;            <span class="comment">// Draw the grid itself</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            <span class="keyword">auto</span> binning = sfArray-&gt;binningValues();</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            <span class="keyword">auto</span> axes = sfArray-&gt;getAxes();</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            <span class="keywordflow">if</span> (not binning.empty() and binning.size() == 2 and</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                axes.size() == 2) {</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;              <span class="keyword">auto</span> loc0Values = axes[0]-&gt;getBinEdges();</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;              sfGrid.<a class="code" href="../../d7/dff/structActsExamples_1_1SurfaceGridData.html#a938f8039290b0dd4700057fb57f06cec">nbins_loc0</a> = loc0Values.size() - 1;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;              sfGrid.<a class="code" href="../../d7/dff/structActsExamples_1_1SurfaceGridData.html#a87f134fce4a7870b4cddf0716158a1a9" title="The number of bins in loc 0 / 1.">type_loc0</a> = int(binning[0]);</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;              sfGrid.<a class="code" href="../../d7/dff/structActsExamples_1_1SurfaceGridData.html#af172b57acd0a170d51f51e2e2eeb8d9d">min_loc0</a> = loc0Values[0];</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;              sfGrid.<a class="code" href="../../d7/dff/structActsExamples_1_1SurfaceGridData.html#a8e6e3b0229cc9d20fd4a7e6f977fad87">max_loc0</a> = loc0Values[loc0Values.size() - 1];</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;              <span class="keyword">auto</span> loc1Values = axes[1]-&gt;getBinEdges();</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;              sfGrid.<a class="code" href="../../d7/dff/structActsExamples_1_1SurfaceGridData.html#a48afe58fea908d4387a528c0a175f156">nbins_loc1</a> = loc1Values.size() - 1;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;              sfGrid.<a class="code" href="../../d7/dff/structActsExamples_1_1SurfaceGridData.html#a8285f427f758bb1bbdd5506565b9ff41">type_loc1</a> = int(binning[1]);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;              sfGrid.<a class="code" href="../../d7/dff/structActsExamples_1_1SurfaceGridData.html#ad65296f5fbd1e6e434d0d274cc04f534">min_loc1</a> = loc1Values[0];</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;              sfGrid.<a class="code" href="../../d7/dff/structActsExamples_1_1SurfaceGridData.html#a41be195f001894a9822930f170c612fd">max_loc1</a> = loc1Values[loc1Values.size() - 1];</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            }</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;            sfGridWriter.append(sfGrid);</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;          }</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;          <span class="comment">// Write the sensitive surface if configured</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;          <span class="keywordflow">if</span> (writeSensitive) {</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">auto</span> surface : sfArray-&gt;surfaces()) {</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;              <span class="keywordflow">if</span> (surface != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                writeSurface(sfWriter, *surface, geoCtx);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;              }</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            }</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;          }</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;          <span class="comment">// Write the passive surface</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;          writeSurface(sfWriter, <a class="code" href="../../d1/d15/ntuple__variables_8C.html#aeaba15d6b74b6b50a39c4b96e5b26f84">layer</a>-&gt;surfaceRepresentation(), <a class="code" href="../../db/dc0/PropagationBentTracks_8cpp.html#a84b6b6ae2524cb394e2187879577d133">geoCtx</a>);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        }</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      }</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;      ++layerIdx;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    }  <span class="comment">// end of layer loop</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="comment">// This is a navigation volume, write the boundaries</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="keywordflow">if</span> (writeBoundary) {</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; bsurface : volume.<a class="code" href="../../dd/dcd/classActs_1_1TrackingVolume.html#a3838d3401260790e2e3935b7d047aaa3" title="Method to return the BoundarySurfaces.">boundarySurfaces</a>()) {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        writeBoundarySurface(sfWriter, *bsurface, geoCtx);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      }</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    }</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  }</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  <span class="comment">// step down into hierarchy to process all child volumnes</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <span class="keywordflow">if</span> (volume.<a class="code" href="../../dd/dcd/classActs_1_1TrackingVolume.html#abb23b97df1ebed6dc6a2ce88a627691a" title="Return the confined volumes of this container array - if it exists.">confinedVolumes</a>()) {</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; confined : volume.<a class="code" href="../../dd/dcd/classActs_1_1TrackingVolume.html#abb23b97df1ebed6dc6a2ce88a627691a" title="Return the confined volumes of this container array - if it exists.">confinedVolumes</a>()-&gt;arrayObjects()) {</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      writeVolume(sfWriter, sfGridWriter, lvWriter, *confined.get(),</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                  writeSensitive, writeBoundary, writeSurfaceGrid,</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                  writeLayerVolume, <a class="code" href="../../db/dc0/PropagationBentTracks_8cpp.html#a84b6b6ae2524cb394e2187879577d133">geoCtx</a>);</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    }</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  }</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;}</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;}  <span class="comment">// namespace</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div>
<div class="line"><a name="l00387"></a><span class="lineno"><a class="code" href="../../de/d77/classActsExamples_1_1CsvTrackingGeometryWriter.html#aa7f20f7d57abf2fa81f4ba60bf25075b">  387</a></span>&#160;<a class="code" href="../../df/dd4/namespaceActsExamples.html#a55f4ecc76ae500b83c0b9eaca86de783">ProcessCode</a> <a class="code" href="../../de/d77/classActsExamples_1_1CsvTrackingGeometryWriter.html#aa7f20f7d57abf2fa81f4ba60bf25075b" title="Write geometry using the per-event context (optional).">CsvTrackingGeometryWriter::write</a>(<span class="keyword">const</span> <a class="code" href="../../d5/dd0/structActsExamples_1_1AlgorithmContext.html" title="Aggregated information to run one algorithm over one event.">AlgorithmContext</a>&amp; ctx) {</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="keywordflow">if</span> (not <a class="code" href="../../de/d77/classActsExamples_1_1CsvTrackingGeometryWriter.html#afdf98201cd6950cca4676cfb7a9d6fb0">m_cfg</a>.<a class="code" href="../../d9/dea/structActsExamples_1_1CsvTrackingGeometryWriter_1_1Config.html#a1949c82e09e8a445e26192b047c162f6" title="Whether to write the per-event file.">writePerEvent</a>) {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d4/d7b/oncsdefs_8h.html#aa90cac659d18e8ef6294c7ae337f6b58">ProcessCode::SUCCESS</a>;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  }</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  SurfaceWriter sfWriter(</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;      <a class="code" href="../../df/dd4/namespaceActsExamples.html#a55483a1d29a92502bca7a916db537ebe">perEventFilepath</a>(<a class="code" href="../../de/d77/classActsExamples_1_1CsvTrackingGeometryWriter.html#afdf98201cd6950cca4676cfb7a9d6fb0">m_cfg</a>.<a class="code" href="../../d9/dea/structActsExamples_1_1CsvTrackingGeometryWriter_1_1Config.html#a1f0955fff80b832969bdc5aa551a3c61" title="Where to place output files.">outputDir</a>, <span class="stringliteral">&quot;detectors.csv&quot;</span>, ctx.<a class="code" href="../../d5/dd0/structActsExamples_1_1AlgorithmContext.html#af8d4a9f0e7ed97eaa0dd3c847d9054bf" title="Unique event identifier.">eventNumber</a>),</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      <a class="code" href="../../de/d77/classActsExamples_1_1CsvTrackingGeometryWriter.html#afdf98201cd6950cca4676cfb7a9d6fb0">m_cfg</a>.<a class="code" href="../../d9/dea/structActsExamples_1_1CsvTrackingGeometryWriter_1_1Config.html#ac6f0b491ef0cd229dc8783f0218bee14" title="Number of decimal digits for floating point precision in output.">outputPrecision</a>);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  SurfaceGridWriter sfGridWriter(</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;      <a class="code" href="../../df/dd4/namespaceActsExamples.html#a55483a1d29a92502bca7a916db537ebe">perEventFilepath</a>(<a class="code" href="../../de/d77/classActsExamples_1_1CsvTrackingGeometryWriter.html#afdf98201cd6950cca4676cfb7a9d6fb0">m_cfg</a>.<a class="code" href="../../d9/dea/structActsExamples_1_1CsvTrackingGeometryWriter_1_1Config.html#a1f0955fff80b832969bdc5aa551a3c61" title="Where to place output files.">outputDir</a>, <span class="stringliteral">&quot;surface-grids.csv&quot;</span>, ctx.<a class="code" href="../../d5/dd0/structActsExamples_1_1AlgorithmContext.html#af8d4a9f0e7ed97eaa0dd3c847d9054bf" title="Unique event identifier.">eventNumber</a>),</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      <a class="code" href="../../de/d77/classActsExamples_1_1CsvTrackingGeometryWriter.html#afdf98201cd6950cca4676cfb7a9d6fb0">m_cfg</a>.<a class="code" href="../../d9/dea/structActsExamples_1_1CsvTrackingGeometryWriter_1_1Config.html#ac6f0b491ef0cd229dc8783f0218bee14" title="Number of decimal digits for floating point precision in output.">outputPrecision</a>);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  LayerVolumeWriter lvWriter(</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      <a class="code" href="../../df/dd4/namespaceActsExamples.html#a55483a1d29a92502bca7a916db537ebe">perEventFilepath</a>(<a class="code" href="../../de/d77/classActsExamples_1_1CsvTrackingGeometryWriter.html#afdf98201cd6950cca4676cfb7a9d6fb0">m_cfg</a>.<a class="code" href="../../d9/dea/structActsExamples_1_1CsvTrackingGeometryWriter_1_1Config.html#a1f0955fff80b832969bdc5aa551a3c61" title="Where to place output files.">outputDir</a>, <span class="stringliteral">&quot;layer-volumes.csv&quot;</span>, ctx.<a class="code" href="../../d5/dd0/structActsExamples_1_1AlgorithmContext.html#af8d4a9f0e7ed97eaa0dd3c847d9054bf" title="Unique event identifier.">eventNumber</a>),</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;      <a class="code" href="../../de/d77/classActsExamples_1_1CsvTrackingGeometryWriter.html#afdf98201cd6950cca4676cfb7a9d6fb0">m_cfg</a>.<a class="code" href="../../d9/dea/structActsExamples_1_1CsvTrackingGeometryWriter_1_1Config.html#ac6f0b491ef0cd229dc8783f0218bee14" title="Number of decimal digits for floating point precision in output.">outputPrecision</a>);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  writeVolume(sfWriter, sfGridWriter, lvWriter, *<a class="code" href="../../de/d77/classActsExamples_1_1CsvTrackingGeometryWriter.html#a503e40c57d4c9b676c5afce52ff84ad2">m_world</a>, <a class="code" href="../../de/d77/classActsExamples_1_1CsvTrackingGeometryWriter.html#afdf98201cd6950cca4676cfb7a9d6fb0">m_cfg</a>.<a class="code" href="../../d9/dea/structActsExamples_1_1CsvTrackingGeometryWriter_1_1Config.html#a2cf25062bd4f729f008cfce847089642" title="Write sensitive surfaces.">writeSensitive</a>,</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;              <a class="code" href="../../de/d77/classActsExamples_1_1CsvTrackingGeometryWriter.html#afdf98201cd6950cca4676cfb7a9d6fb0">m_cfg</a>.<a class="code" href="../../d9/dea/structActsExamples_1_1CsvTrackingGeometryWriter_1_1Config.html#a9dad49452fc4d955c0cb91bf18737ea3" title="Write boundary surfaces.">writeBoundary</a>, <a class="code" href="../../de/d77/classActsExamples_1_1CsvTrackingGeometryWriter.html#afdf98201cd6950cca4676cfb7a9d6fb0">m_cfg</a>.<a class="code" href="../../d9/dea/structActsExamples_1_1CsvTrackingGeometryWriter_1_1Config.html#a86e3d8fa26a8c84d863a98074279831a" title="Write the surface grid information.">writeSurfaceGrid</a>,</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;              <a class="code" href="../../de/d77/classActsExamples_1_1CsvTrackingGeometryWriter.html#afdf98201cd6950cca4676cfb7a9d6fb0">m_cfg</a>.<a class="code" href="../../d9/dea/structActsExamples_1_1CsvTrackingGeometryWriter_1_1Config.html#a90e6aab015b3cf1eda59ca96f06ccc5e" title="Write the layer volume representation.">writeLayerVolume</a>, ctx.<a class="code" href="../../d5/dd0/structActsExamples_1_1AlgorithmContext.html#a964a182c8f498ffae375995d8395a1cc" title="Per-event geometry context.">geoContext</a>);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d4/d7b/oncsdefs_8h.html#aa90cac659d18e8ef6294c7ae337f6b58">ProcessCode::SUCCESS</a>;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;}</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div>
<div class="line"><a name="l00410"></a><span class="lineno"><a class="code" href="../../de/d77/classActsExamples_1_1CsvTrackingGeometryWriter.html#aabb1f351e3e735b9c9d7655bf1c71ffb">  410</a></span>&#160;<a class="code" href="../../df/dd4/namespaceActsExamples.html#a55f4ecc76ae500b83c0b9eaca86de783">ProcessCode</a> <a class="code" href="../../de/d77/classActsExamples_1_1CsvTrackingGeometryWriter.html#aabb1f351e3e735b9c9d7655bf1c71ffb" title="Write geometry using the default context.">CsvTrackingGeometryWriter::finalize</a>() {</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  SurfaceWriter sfWriter(<a class="code" href="../../df/dd4/namespaceActsExamples.html#ab2530bb4e7128ba9cb52cae58e217206" title="Join dir and name into one path with correct handling of empty dirs.">joinPaths</a>(<a class="code" href="../../de/d77/classActsExamples_1_1CsvTrackingGeometryWriter.html#afdf98201cd6950cca4676cfb7a9d6fb0">m_cfg</a>.<a class="code" href="../../d9/dea/structActsExamples_1_1CsvTrackingGeometryWriter_1_1Config.html#a1f0955fff80b832969bdc5aa551a3c61" title="Where to place output files.">outputDir</a>, <span class="stringliteral">&quot;detectors.csv&quot;</span>),</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                         <a class="code" href="../../de/d77/classActsExamples_1_1CsvTrackingGeometryWriter.html#afdf98201cd6950cca4676cfb7a9d6fb0">m_cfg</a>.<a class="code" href="../../d9/dea/structActsExamples_1_1CsvTrackingGeometryWriter_1_1Config.html#ac6f0b491ef0cd229dc8783f0218bee14" title="Number of decimal digits for floating point precision in output.">outputPrecision</a>);</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  SurfaceGridWriter sfGridWriter(</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      <a class="code" href="../../df/dd4/namespaceActsExamples.html#ab2530bb4e7128ba9cb52cae58e217206" title="Join dir and name into one path with correct handling of empty dirs.">joinPaths</a>(<a class="code" href="../../de/d77/classActsExamples_1_1CsvTrackingGeometryWriter.html#afdf98201cd6950cca4676cfb7a9d6fb0">m_cfg</a>.<a class="code" href="../../d9/dea/structActsExamples_1_1CsvTrackingGeometryWriter_1_1Config.html#a1f0955fff80b832969bdc5aa551a3c61" title="Where to place output files.">outputDir</a>, <span class="stringliteral">&quot;surface-grids.csv&quot;</span>), <a class="code" href="../../de/d77/classActsExamples_1_1CsvTrackingGeometryWriter.html#afdf98201cd6950cca4676cfb7a9d6fb0">m_cfg</a>.<a class="code" href="../../d9/dea/structActsExamples_1_1CsvTrackingGeometryWriter_1_1Config.html#ac6f0b491ef0cd229dc8783f0218bee14" title="Number of decimal digits for floating point precision in output.">outputPrecision</a>);</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  LayerVolumeWriter lvWriter(<a class="code" href="../../df/dd4/namespaceActsExamples.html#ab2530bb4e7128ba9cb52cae58e217206" title="Join dir and name into one path with correct handling of empty dirs.">joinPaths</a>(<a class="code" href="../../de/d77/classActsExamples_1_1CsvTrackingGeometryWriter.html#afdf98201cd6950cca4676cfb7a9d6fb0">m_cfg</a>.<a class="code" href="../../d9/dea/structActsExamples_1_1CsvTrackingGeometryWriter_1_1Config.html#a1f0955fff80b832969bdc5aa551a3c61" title="Where to place output files.">outputDir</a>, <span class="stringliteral">&quot;layer-volumes.csv&quot;</span>),</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                             <a class="code" href="../../de/d77/classActsExamples_1_1CsvTrackingGeometryWriter.html#afdf98201cd6950cca4676cfb7a9d6fb0">m_cfg</a>.<a class="code" href="../../d9/dea/structActsExamples_1_1CsvTrackingGeometryWriter_1_1Config.html#ac6f0b491ef0cd229dc8783f0218bee14" title="Number of decimal digits for floating point precision in output.">outputPrecision</a>);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  writeVolume(sfWriter, sfGridWriter, lvWriter, *<a class="code" href="../../de/d77/classActsExamples_1_1CsvTrackingGeometryWriter.html#a503e40c57d4c9b676c5afce52ff84ad2">m_world</a>, <a class="code" href="../../de/d77/classActsExamples_1_1CsvTrackingGeometryWriter.html#afdf98201cd6950cca4676cfb7a9d6fb0">m_cfg</a>.<a class="code" href="../../d9/dea/structActsExamples_1_1CsvTrackingGeometryWriter_1_1Config.html#a2cf25062bd4f729f008cfce847089642" title="Write sensitive surfaces.">writeSensitive</a>,</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;              <a class="code" href="../../de/d77/classActsExamples_1_1CsvTrackingGeometryWriter.html#afdf98201cd6950cca4676cfb7a9d6fb0">m_cfg</a>.<a class="code" href="../../d9/dea/structActsExamples_1_1CsvTrackingGeometryWriter_1_1Config.html#a9dad49452fc4d955c0cb91bf18737ea3" title="Write boundary surfaces.">writeBoundary</a>, <a class="code" href="../../de/d77/classActsExamples_1_1CsvTrackingGeometryWriter.html#afdf98201cd6950cca4676cfb7a9d6fb0">m_cfg</a>.<a class="code" href="../../d9/dea/structActsExamples_1_1CsvTrackingGeometryWriter_1_1Config.html#a86e3d8fa26a8c84d863a98074279831a" title="Write the surface grid information.">writeSurfaceGrid</a>,</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;              <a class="code" href="../../de/d77/classActsExamples_1_1CsvTrackingGeometryWriter.html#afdf98201cd6950cca4676cfb7a9d6fb0">m_cfg</a>.<a class="code" href="../../d9/dea/structActsExamples_1_1CsvTrackingGeometryWriter_1_1Config.html#a90e6aab015b3cf1eda59ca96f06ccc5e" title="Write the layer volume representation.">writeLayerVolume</a>, <a class="code" href="../../de/d60/classActs_1_1ContextType.html">Acts::GeometryContext</a>());</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d4/d7b/oncsdefs_8h.html#aa90cac659d18e8ef6294c7ae337f6b58">ProcessCode::SUCCESS</a>;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->

<!-- start footer part -->
<div id="nav-path" class="navpath">
	<!-- id is needed for treeview function! -->
	<ul>
		<li class="navelem"><a class="el" href="../../dir_8a083ba67d76eaacec681de2105f81ce.html">acts</a></li><li class="navelem"><a class="el" href="../../dir_dd639112a1a9a96ce5326d38dc5b798f.html">blob</a></li><li class="navelem"><a class="el" href="../../dir_ed4d3476f51c55226233cecea75738c3.html">sPHENIX</a></li><li class="navelem"><a class="el" href="../../dir_742c7ae788829ef2853b4e284ec0f7b2.html">Examples</a></li><li class="navelem"><a class="el" href="../../dir_09c76a59a2004713f9a5d4b271150905.html">Io</a></li><li class="navelem"><a class="el" href="../../dir_b0e29b7d42d861d18e77de1e30b0df45.html">Csv</a></li><li class="navelem"><a class="el" href="../../dir_f4c0283cc9209a8c15ddeb8fbf68dd51.html">src</a></li><li class="navelem"><a class="el" href="../../da/d59/CsvTrackingGeometryWriter_8cpp.html">CsvTrackingGeometryWriter.cpp</a></li>
		<li class="footer">
		Built by <a href="mailto:jhuang@bnl.gov">Jin Huang</a></em>.
			updated: <em>Sat Feb 17 2024 22:17:38</em> using <a
			href="http://www.doxygen.org/index.html"> <img class="footer"
				src="../../doxygen.png" alt="doxygen" /></a> 1.8.2 
				with <a href="https://github.com/sPHENIX-Collaboration">sPHENIX GitHub integration</a>
		</li>
	</ul>
</div>
</body>
</html>
